{% extends 'base.html.twig' %}
{% block navbar %}
	{{ include('admin/menu_admin.html.twig') }}
{% endblock %}

{% block content %}

	<section>
		<h1 class="titulo">Llista d'articles</h1>

		<div class="accordion" id="accordionExample">

			{% for article in articles %}

				<div class="card">
					{% if article.visible %}
						<div class="card-header">
						{% else %}
							<div class="card-header alert-warning">
							{% endif %}
							<div class="row no-gutters">
								<div class="col-md-8">

									<h5 class="card-title" data-toggle="collapse" data-target="#article_{{article.id}}">
										{{article.titol }}</h5>
								</div>
								<div class="col-md-3 text-right">
									{% for cat in article.categories %}
										<img src="/img/categories/{{ asset(cat.logo) }}" class="cat-article-icon" alt="{{cat.nom}} logotip">
									{% endfor %}
								</div>
								<div class="col-md-1 text-right">

									{% if article.visible %}
										<i class="admin-icons fa fa-eye-slash"></i>
									{% else %}
										<i class="admin-icons fa fa-eye"></i>
									{% endif %}
									<i class="admin-icons fa fa-cog"></i>

								</div>
							</div>
						</div>
						<div class="card-body collapse" id="article_{{article.id}}" data-parent="#accordionExample">

							<p class="card-text">{{article.resum}}
								<hr>
								Creada el
								{{article.dataPublicacio|date('d/m/Y')}}
								per
								{{article.autor.username}}
								({{article.autor.articles|length}}
								articles)<br/>
								{% if article.dataActualitzacio != null %}
									Darrera modificaci√≥:
									{{article.dataActualitzacio|date('d/m/Y')}}<br/>
								{% endif %}
							</p>
							{% if article.comentaris|length != 0 %}
								<hr>
								{% for comment in article.comentaris %}
									<p class="admin-comments">
										{% if comment.tipus == 0 %}
											<i class="fa fa-frown-o"></i>
										{% elseif comment.tipus == 1 %}
											<i class="fa fa-meh-o"></i>
										{% elseif comment.tipus == 2 %}
											<i class="fa fa-smile-o"></i>
										{% elseif comment.tipus == 3 %}
											<i class="fa fa-rocket"></i>
										{% endif %}
										 {{comment.user.username}} {{comment.dataPublicacio|date('d/m/Y')}} {{comment.visible}} <i class="fa fa-cog"></i><br/>
										 "{{comment.text}}"
									</p>
								{% endfor %}
							{% endif %}
						</div>
					</div>
				{% endfor %}
			</div>

		</section>
	{% endblock %}
